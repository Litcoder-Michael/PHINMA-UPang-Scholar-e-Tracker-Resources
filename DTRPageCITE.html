 <!DOCTYPE html>
<html>
    <head>
        <title>
            DTRPageCITEDept
        </title>
        
    </head>

        <style>

            .buttonAbout{
                font-family: Arial, Helvetica, sans-serif;

                position: absolute;

                margin-left: 68vw;

                margin-top: 4vw;

                color: white;

                text-align: center;

                font-size: 2vw;

                background-color:transparent;

                background-repeat: repeat;

                border: none;

                width: 6vw;

                cursor: pointer;
                
                transition-duration: 0.4s;


            }

            .buttonHelp{
                font-family: Arial, Helvetica, sans-serif;

                position: absolute;

                margin-left: 76vw;

                margin-top: 4vw;

                text-align: center;

                font-size: 2vw;

                background-color: transparent;
                
                background-repeat: repeat;

                border: none;

                overflow: hidden;

                color: white;

                cursor: pointer;

            }



            .buttonAbout:hover {
            background-color: #4CAF50;
            color: white;
            }

            .buttonHelp:hover {
            background-color: #4CAF50;
            color: white;
            }

            .buttonRecords{

                font-family: Arial, Helvetica, sans-serif;

                position: absolute;

                margin-left: 58vw;

                margin-top: 4vw;

                text-align: center;

                font-size: 2vw;

                width: 8vw;

                background: transparent;
                cursor: pointer;

                background-repeat: repeat;

                border: none;

                overflow: hidden;

                color: white;

                cursor: pointer;

                transition-duration: 0.4s;
            }
            .buttonRecords:hover {
            background-color: #4CAF50;
            color: white;
            }

            .buttonHome{

            font-family: Arial, Helvetica, sans-serif;

            position: absolute;

            margin-left: 48vw;

            margin-top: 4vw;

            text-align: center;

            font-size: 2vw;

            width: 8vw;

            background: transparent;
            
            cursor: pointer;

            background-repeat: repeat;

            border: none;

            overflow: hidden;

            color: white;

            cursor: pointer;

            transition-duration: 0.4s;
            }

            .buttonHome:hover {
            background-color: #4CAF50;
            color: white;
            }


            .buttonLogout{

                font-family: Arial, Helvetica, sans-serif;

                position: absolute;

                margin-left: 83vw;

                margin-top: 4vw;
                
                text-align: center;

                font-size: 2vw;

                width: 7vw;
                
                color: white;

                background-color: transparent;

                border: none;

                cursor: pointer;
            }
            .buttonLogout:hover {
                color: white;
                background-color:#4CAF50;
            }

            .table, td, th{
                border: 1px solid black;
            }
            
            table {
            border-collapse: collapse;
            width: 200%;
            }

            th {
            height: 1vw;
            background-color: #2e3e1b;
            color: white;
            }

            tr{transition: all .25s ease-in-out;}
            tr:hover{background-color: #EEE; cursor: pointer;}
        </style>

    <body onload="OnLoadDTR()" style="background-color: #F8F8FF;">



        
        <div class="header" style="height: 10vw; width: 100%; margin-left: -8px; margin-top: -8px; border: solid #666600; background-color: #2e3e1b; position: absolute;">

            <h1 id="h1" style="position:absolute; padding-left: 2vw; padding-top: 2vw; color: white; font-family: Arial, Helvetica, sans-serif;">DAILY TIME RECORD</h1>
    
            <a href="about.html">
            <button class="buttonAbout">About</button></a>

            <a href="Updated Help/HelpUsingE-Tracker.html">
            <button class="buttonHelp">Help</button></a>
            
            <a href="SavedRecordsPage.html">
            <button class="buttonRecords">Records</button></a>

            <a href="DTRPageCITE.html">
                <button class="buttonHome">Home</button></a>

            <button class="buttonLogout" onclick="logout()">Logout</button>

            <a href="SavedRecordsPage.html">
                <button class="buttonRecords">Records</button></a>
    
                <button class="buttonLogout" onclick="logout()">Logout</button>

            <a href="ManagingAccount.html">
            <img id="profileimg" src="accountLogo.jpg" style="height: 5vw; width: 5vw;border-radius: 50%; margin-left: 91vw; margin-top: 2.5vw; position: absolute;"></img></a>

        </div>
            
            <div id="addDTR" style="height: 15vw; width: 91vw; border: solid black 1px; border-radius: 30px; background-color: white; position: absolute; margin-left: 4vw; margin-top: 12vw; position: absolute;">
                <h3 style="margin-left: 7.9vw; position: absolute;">Date</h3>
                <input type="date" style="margin-left: 10.5vw; margin-top: 1.3vw; position: absolute;" name="date" id="date"></input>

                <h3 style="margin-left: 22.7vw; margin-top: 1.5vw; position: absolute;">Time in</h3>
                <input type="time" style="margin-left: 27vw; margin-top: 1.3vw; position: absolute;" name="timein" id="timein"></input>
                
                <h3 style="margin-left: 36vw; margin-top: 1.5vw; position: absolute;">Time out</h3>
                <input type="time" style="margin-left: 41vw; margin-top: 1.3vw; position: absolute;" name="timeout" id="timeout"></input>

                <h3 style="margin-left: 50vw; margin-top: 1.5vw; position: absolute;">Total hrs</h3>
                <input type="text" style="margin-left: 55vw; margin-top: 1.3vw; position: absolute;" name="totalhrs" id="totalhrs"></input>

                <h3 style="margin-left: 67.3vw; margin-top: 1.5vw; position: absolute;">Student name</h3> 
                <input disabled type="text" style="margin-left: 75vw; margin-top: 1.3vw; position: absolute;" name="studname" id="studname"></input>

                <h3 style="margin-left: 12vw; margin-top: 4.3vw; position: absolute;">Student no.</h3>
                <input  type="text" style="margin-left: 18vw; margin-top: 4.4vw; position: absolute;" name="studno" id="studno"></input>

                <h3 style="margin-left: 31vw; margin-top: 4.3vw; position: absolute;">Course</h3>
                <input disabled type="text" style="margin-left: 35vw; margin-top: 4.4vw; position: absolute;" name="course" id="course"></input>

                <h3 style="margin-left: 48.4vw; margin-top: 4.3vw; position: absolute;">Scholarship</h3>
                <input disabled type="text" style="margin-left: 55vw; margin-top: 4.4vw; position: absolute;" name="scholarship" id="scholarship"></input>    

                <h3 style="margin-left: 68.4vw; margin-top: 4.3vw; position: absolute;">Year</h3>
                <input disabled type="text" style="margin-left:71vw; margin-top: 4.3vw; position: absolute;" name="year" id="year" ></input> 

                <h3 style="margin-left: 16vw; margin-top: 7.5vw; position: absolute;">Assigned Department</h3>
                <input disabled type="text" style="margin-left: 28vw; margin-top: 7.5vw; position: absolute;" name="assigneddept" id="assigneddept"></input>

                <h3 style="margin-left: 40vw; margin-top: 7.5vw; position: absolute;">Assigned Faculty</h3>
                <input disabled type="text" style= "margin-left: 49.6vw; margin-top: 7.5vw; position: absolute;" name="assignedFaculty" id="assignedFaculty"></input>

                <h3 style="margin-left: 62.3vw; margin-top: 7.5vw; position: absolute;">Duty description</h3>
                <input type="text" style="margin-left: 72vw; margin-top: 7.5vw; position: absolute;" name="dutydescription" id="dutydescription"></input>

                <button onclick="addhtmltablerow();" type="button" style="height: 4vw; width: 13vw; background-color: #669999; color:black; position: absolute; margin-left: 40vw; margin-top: 13vw; font-size: 20px;
                border: solid black; border-radius: 30px;">Add DTR</button> 

            </div>

            <div style="border-collapse: collapse; border: solid black 1px; position: absolute; margin-top: 35.5vw; margin-left: 60px;">

                <table id="StudentDTR" style="width: 1300px; height: 2vw; text-align: center; width: 91vw;">
                    <tr>
                        <th>Date</th>
                        <th>Time In</th>
                        <th>Time Out</th>
                        <th>Total Hrs</th>
                        <th>Student Name</th>
                        <th>Student no.</th>
                        <th>Course</th>
                        <th>Scholarship</th>
                        <th>Year</th>
                        <th>Assigned Department</th> 
                        <th>Assigned Faculty</th>   
                        <th>Duty Description</th>
                    </tr>
                </table>
            </div>

                <script>

                    var rIndex, 
                        table = document.getElementById("StudentDTR");

                    //check empty inputs 
                    function checkEmptyInputs()
                    {
                        var isEmpty = false,
                            date = document.getElementById("date").value,
                            timein = document.getElementById("timein").value,
                            timeout = document.getElementById("timeout").value,
                            totalhrs = document.getElementById("totalhrs").value,
                            studname = document.getElementById("studname").value,
                            studno = document.getElementById("studno").value,
                            course = document.getElementById("course").value,
                            scholarship = document.getElementById("scholarship").value,
                            year = document.getElementById("year").value,
                            assigneddept = document.getElementById("assigneddept").value,
                            assignedFaculty = document.getElementById("assignedFaculty").value,
                            dutydescription = document.getElementById("dutydescription").value;

                        if (date === ""){
                            alert("Date is empty")
                            isEmpty = true;
                        }

                        else if (timein === ""){
                            alert("Time in is empty")
                            isEmpty = true;
                        }
                        
                        else if (timeout === "") {
                            alert("Time out is empty")
                            isEmpty = true;
                        }

                        else if (totalhrs === ""){
                            alert("Total hrs is empty")
                            isEmpty = true;
                        }

                        else if (studname === ""){
                            alert("Student name is empty")
                            isEmpty = true;
                        }

                        else if (studno === ""){
                            alert("Student number is empty")
                            isEmpty = true;
                        }

                        else if (course === ""){
                            alert("Course is empty")
                            isEmpty = true;
                        }

                        else if (scholarship === ""){
                            alert("Scholarship is empty")
                            isEmpty = true;
                        }

                        else if (year === ""){
                            alert("Year is empty")
                            isEmpty = true;
                        }

                        else if (assigneddept=== ""){
                            alert("Assigned department is empty")
                            isEmpty = true;
                        }

                        else if (assignedFaculty === ""){
                            alert("Assigned Faculty is empty")
                            isEmpty = true;
                        }

                        else if (dutydescription === ""){
                            alert("Duty description is empty")
                            isEmpty = true;
                        }
                        return isEmpty;
                    }

                    //add row
            function addhtmltablerow() 
                    {
                if(!checkEmptyInputs()){    
                    var table = document.getElementById("StudentDTR"),
                    newRow = table.insertRow(StudentDTR.length),
                    cell1 = newRow.insertCell(0),
                    cell2 = newRow.insertCell(1),
                    cell3 = newRow.insertCell(2),
                    cell4 = newRow.insertCell(3),
                    cell5 = newRow.insertCell(4),
                    cell6 = newRow.insertCell(5),
                    cell7 = newRow.insertCell(6),
                    cell8 = newRow.insertCell(7),
                    cell9 = newRow.insertCell(8),
                    cell10 = newRow.insertCell(9),
                    cell11 = newRow.insertCell(10),
                    cell12 = newRow.insertCell(11),
                    
                    date = document.getElementById("date").value,
                    timein = document.getElementById("timein").value,
                    timeout = document.getElementById("timeout").value,
                    totalhrs = document.getElementById("totalhrs").value,
                    studname = document.getElementById("studname").value,
                    studno = document.getElementById("studno").value,
                    course = document.getElementById("course").value,
                    scholarship = document.getElementById("scholarship").value,
                    year = document.getElementById("year").value,
                    assigneddept = document.getElementById("assigneddept").value,
                    assignedFaculty = document.getElementById("assignedFaculty").value,
                    dutydescription = document.getElementById("dutydescription").value;

                    cell1.innerHTML = date;
                    cell2.innerHTML = timein;
                    cell3.innerHTML = timeout;
                    cell4.innerHTML = totalhrs;
                    cell5.innerHTML = studname;
                    cell6.innerHTML = studno;
                    cell7.innerHTML = course;
                    cell8.innerHTML = scholarship;
                    cell9.innerHTML = year;
                    cell10.innerHTML = assigneddept;
                    cell11.innerHTML = assignedFaculty;
                    cell12.innerHTML = dutydescription;

                    //call the function to set the event to the new row
                    selectedRowToInput();
                }
                }

                    //display selected row data into input text
                    function selectedRowToInput() {
                        
                        for (var i = 1; i < table.rows.length; i++)
                        {
                            table.rows[i].onclick = function(){

                                //get the selected row index
                                rIndex = this.rowIndex;
                                document.getElementById("date").value = this.cells[0].innerHTML;
                                document.getElementById("timein").value = this.cells[1].innerHTML;
                                document.getElementById("timeout").value = this.cells[2].innerHTML;
                                document.getElementById("totalhrs").value = this.cells[3].innerHTML;
                                document.getElementById("studname").value = this.cells[4].innerHTML;
                                document.getElementById("studno").value = this.cells[5].innerHTML;
                                document.getElementById("course").value = this.cells[6].innerHTML;
                                document.getElementById("scholarship").value = this.cells[7].innerHTML;
                                document.getElementById("year").value = this.cells[8].innerHTML;
                                document.getElementById("assigneddept").value = this.cells[9].innerHTML;
                                document.getElementById("assignedFaculty").value = this.cells[10].innerHTML;
                                document.getElementById("dutydescription").value = this.cells[11].innerHTML;
                            };
                        }
                    }

                    selectedRowToInput();

                    function editHtmlTableSelectedRow()
                    {
                        var date = document.getElementById("date").value,
                            timein = document.getElementById("timein").value,
                            timeout = document.getElementById("timeout").value,
                            totalhrs = document.getElementById("totalhrs").value,
                            studname = document.getElementById("studname").value,
                            studno = document.getElementById("studno").value,
                            course = document.getElementById("course").value,
                            scholarship = document.getElementById("scholarship").value,
                            year = document.getElementById("year").value,
                            assigneddept = document.getElementById("assigneddept").value,
                            assignedFaculty = document.getElementById("assignedFaculty").value,
                            dutydescription = document.getElementById("dutydescription").value;

                        if(!checkEmptyInputs()){

                        table.rows[rIndex].cells[0].innerHTML = date;
                        table.rows[rIndex].cells[1].innerHTML = timein;
                        table.rows[rIndex].cells[2].innerHTML = timeout;
                        table.rows[rIndex].cells[3].innerHTML = totalhrs;
                        table.rows[rIndex].cells[4].innerHTML = studname;
                        table.rows[rIndex].cells[5].innerHTML = studno;
                        table.rows[rIndex].cells[6].innerHTML = course;
                        table.rows[rIndex].cells[7].innerHTML = scholarship;
                        table.rows[rIndex].cells[8].innerHTML = year;
                        table.rows[rIndex].cells[9].innerHTML = assigneddept;
                        table.rows[rIndex].cells[10].innerHTML = assignedFaculty;
                        table.rows[rIndex].cells[11].innerHTML = dutydescription;
                        }
                    }

                    function removeSelectedRow ()
                    {
                        table.deleteRow(rIndex);
                        //clear input texts

                        date = document.getElementById("date").value = "";
                            document.getElementById("timein").value = "";
                            document.getElementById("timeout").value = "";
                            document.getElementById("totalhrs").value = "";
                            document.getElementById("studname").value = "";
                            document.getElementById("studno").value = "";
                            document.getElementById("course").value = "";
                            document.getElementById("scholarship").value = "";
                            document.getElementById("year").value = "";
                            document.getElementById("assigneddept").value = "";
                            document.getElementById("assignedFaculty").value = "";
                            document.getElementById("dutydescription").value = "";
                    }
                    
   
                </script>
                    
                <button onclick="saveRecord()" type="button" style="height: 4vw; width: 17vw; background-color:#339933; color: white; position: absolute; margin-left: 13vw; margin-top: 31vw; font-size: 1.5vw;
                border: solid black; border-radius: 30px;">Save this record</button>

                <button onclick="editHtmlTableSelectedRow();" type="button" style="height: 4vw; width: 9vw; background-color:white; color:black; position: absolute; margin-left: 30vw; margin-top: 31vw; font-size: 1.5vw;
                border: solid black; border-radius: 30px;">Edit</button>

                <button onclick="removeSelectedRow();" type="button" style="height: 4vw; width: 9vw; background-color: #993333; color: white; position: absolute; margin-left: 4vw; margin-top: 31vw; font-size: 1.5vw;
                border: solid black; border-radius: 30px;">Remove</button>
                            
        <div 
            class="footer 2" style="background-color: black; height: 18vw; width: 100%; margin-left: -8px;
            margin-top: 80vw; position: absolute; overflow: hidden; border-top-left-radius: 2vw; border-top-right-radius: 2vw; border: solid yellow; ">
                         
            <h4 style="color:white; font-size: 1.4vw; margin-left: 10vw; margin-top: 2vw; position: absolute;"><b>SERVICES</b></h4> 
                         
            <p style="color: white; margin-left: 1.1vw; margin-left: 5vw; margin-top: 6vw; position: absolute;">ONLINE DTR</p>
                         
            <p style="color: white; margin-left: 1.1vw; margin-left: 5vw; margin-top: 9vw; position: absolute;">SCHOLARSHIP RENEWAL</p>
                         
            <p style="color: white; margin-left: 1.1vw; margin-left: 5vw; margin-top: 12vw; position: absolute;">RECORD TRACKER</p>
                         
            <h4 style="color: white; font-size: 1.4vw; margin-left: 45vw; margin-top: 2vw; position: absolute;">DEPARTMENTS</h4>
                         
            <a href="https://www.facebook.com/phinma.upang.citesc">
            <p style="color: white; margin-left: 40vw; margin-top: 5vw; position: absolute;">CITE</p></a>
                         
            <a href="https://www.facebook.com/chssc.upang">
            <p style="color: white; margin-left: 40vw; margin-top: 9vw; position: absolute;">CHS</p></a>
                     
            <a href="https://www.facebook.com/groups/phinmaupangcssstudentcommunity">
            <p style="color: white; margin-left: 49vw; margin-top: 5vw; position: absolute;">CSS</p></a>
                         
            <a href="https://www.facebook.com/Phinma-University-of-Pangasinan-College-of-Engineering-and-Architecture-882598705162726">
            <p style="color: white; margin-left: 49vw; margin-top: 9vw; position: absolute">CEA</p></a>
                         
            <a href="https://www.facebook.com/PHINMAUPang.CMAStudentCouncil">
            <p style="color: white; margin-left: 58vw; margin-top: 5vw; position: absolute;">CMA</p></a>
                         
            <a href="https://www.facebook.com/phinmaupangcassc">
            <p style="color: white; margin-left: 58vw; margin-top: 9vw; position: absolute;">CAS</p></a>
                         
            <h4 style="font-size: 1.4vw; color: white; margin-left: 83vw; margin-top: 2vw; position: absolute;">REACH US:</h4>
                         
            <a href="https://www.facebook.com/phinmaupang">
            <img src="FacebookLogo.png" style="height: 2.5vw; width: 2.5vw; position: absolute;
            margin-left: 83vw; color: whitesmoke; margin-top: 5vw"></a>
                         
            <a href="https://www.instagram.com/phinmaupang/">
            <img src="InstagramLogo.png" style="height: 3.9vw; width: 5.5vw; position: absolute;
            margin-left: 84.5vw; margin-top: 4.3vw;"></a>   
                         
            <a href="https://twitter.com/phinmaupang?lang=en">
            <img src="TwitterLogo.png" style="height: 4.6vw; width: 4vw; position:
            absolute; margin-left: 88.2vw; margin-top: 4vw;"></a>
                         
            <a href="mailto:info@up.phinma.edu.ph">
            <img src="GmailLogo.png" style="height: 2.6vw; width: 2.6vw; margin-top: 5vw;
            margin-left: 92vw; margin-top: 5vw; position: absolute;"></a>
                         
            <p style="color: white; font-size: 1.6vw; margin-left: 83vw; margin-top: 10vw; position: absolute;">You can call us at:<br>(075) 522 5635</p>
                         
            <p style="color: green; font-size: 1.2vw; text-align: center; margin-top: 13vw; position: absolute; margin-left: 36.3vw;">PHINMA-University of Pangasinan<br>Arellano St., Dagupan City, Pangasinan, Philippines, 2400.</p>
                         
            <p style="color: #006600; font-size: 1.1vw; margin-top: 16.3vw; margin-left: 46vw; position: absolute;">Copyright &copy; 2020 </p>
                         
        </div>
        
         
        <!-- firebase -->
        <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-app.js"></script>   
        <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-firestore.js"></script>
        <script src="crud.js"></script>

        <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>
      
        <script src="auth.js"></script> 
        <script>
            var storage = firebase.storage();
             var image = document.getElementById('profileimg');

            firebase.auth().onAuthStateChanged(function(user){
                  if (!user) { 
                    window.location.href = "MainPage.html";
                  } else {
                    var userID = localStorage.getItem('userid');
               
                    localStorage.setItem('userid', user.uid);
                
                    storage.ref('admin/' + user.uid).getDownloadURL().then(function(url) {
                        var imgUrl = url;
                      
                        image.src = imgUrl;
                    });
                   
                  }
            })
        </script>
    </body>

</html>